### 一、整体布局架构

这是一个**三栏式专业简历编辑器**，基于 **React 19** 和 **HeroUI (v2/v3)** 组件库构建，采用深色主题（Dark Mode）设计。整体布局从左到右依次为：**左侧面板区（编辑入口）→ 中间预览区（实时渲染）→ 右侧面板区（模块管理）**。顶部贯穿全局操作栏，形成"工"字形布局结构。设计语言偏向现代化SaaS工具风格，强调专业感与操作效率。

**技术栈概览**：
*   **核心框架**：React 19, Vite
*   **UI 组件库**：HeroUI (NextUI)
*   **状态管理**：Zustand (配合 persist 中间件实现本地存储)
*   **样式方案**：Tailwind CSS
*   **富文本编辑**：Tiptap
*   **拖拽排序**：@dnd-kit (核心/排序/修饰符)
*   **图标库**：lucide-react / react-icons
*   **动画交互**：Framer Motion

### 二、左侧面板区（编辑入口区）

**定位**：用户与简历内容交互的主要输入界面，承载所有结构化数据的录入与修改。

**功能详解**：

1.  **可折叠模块列表（主体区域）**
    -   采用 HeroUI **Accordion** (手风琴) 交互模式，每个模块包含：
        -   左侧圆形图标（带颜色区分模块类型，使用 `lucide-react` 图标，如“基本信息”为 `User`，“专业技能”为 `Code`）
        -   模块名称（如“基本信息”、“专业技能”）
        -   右侧折叠/展开箭头
        -   部分模块带有编辑图标（`Pencil`）和删除图标（`Trash2`），表示可操作
        -   卡片左侧为拖拽手柄图标 (`GripVertical`)，基于 **@dnd-kit/sortable** 实现平滑的拖拽动画和位置交换。
    -   **模块区分**：
        -   基础信息类（如“基本信息”）：不可删除，仅可编辑，用于承载简历核心身份信息。
        -   内容类（如“专业技能”、“工作经历”）：可编辑、可删除、可新增，用于承载简历主体内容。

2.  **当前激活模块的编辑态（以“个人信息”模块为例）**
    -   **布局结构**：展开后为表单式布局，使用 HeroUI **Input** 和 **Select** 组件，每个信息项为独立的输入单元。
    -   **核心信息项（带图标库支持）**：
        -   **姓名**：HeroUI `Input` 单行文本输入框，无图标，为必填项，支持 `isInvalid` 状态显示错误提示“请输入真实姓名”。
        -   **年龄/性别**：HeroUI `Input` 组合 `Select`，左侧显示对应图标（如年龄为 `Calendar`、性别为 `User`）。
        -   **联系方式（电话/邮箱/GitHub/LinkedIn）**：
            -   每个联系方式为一个独立的“图标+输入框”组合单元。
            -   输入框左侧为可点击的图标按钮（HeroUI `Button` isIconOnly），点击后弹出**图标选择面板**（Icon Picker）。
            -   **图标选择面板**：使用 HeroUI `Popover` + `ScrollShadow` 实现，展示预设的图标库（如电话、邮箱、GitHub、LinkedIn、微信、QQ等）。
            -   输入框为 HeroUI `Input`，用于填写具体号码或链接，支持正则校验（如“请输入有效的手机号码”）。
            -   支持“+ 添加联系方式”按钮（HeroUI `Button` dashed variant），点击可新增一行。
    -   **辅助信息项**：
        -   **求职意向/期望城市**：HeroUI `Autocomplete` 或 `Select`，支持下拉选择城市列表，左侧可显示定位图标 (`MapPin`)。
        -   **个人简介**：HeroUI `Textarea`，用于简短自我介绍，带占位提示。
    -   **交互细节**：
        -   所有输入框支持实时校验（Zustand 状态实时驱动），格式错误时显示红色边框和错误提示。
        -   图标选择面板支持搜索（如输入“github”快速定位图标）。
        -   模块底部有“保存”和“取消”按钮，保存后自动折叠模块并同步更新右侧预览区。

3.  **其他模块的编辑态（以“专业技能”模块为例）**
    -   展开后显示 **Tiptap** 富文本编辑器工具栏：撤销/重做、粗体、斜体、无序列表、有序列表、链接、删除线等。
    -   下方为 Tiptap `EditorContent` 输入区域，带有占位提示文案。
    -   输入区支持多行文本，自适应高度，输入内容实时同步到右侧预览区（通过 Zustand 更新 content）。

---

### 三、中间预览区（实时渲染区）

**定位**：所见即所得（WYSIWYG）的简历效果展示，实时同步左侧编辑内容。

**功能详解**：

1.  **A4纸张模拟容器**
    -   白色背景的文档预览区，使用 Tailwind CSS 设置固定宽高比（`aspect-[210/297]`）或绝对尺寸（`210mm` 宽）。
    -   带有轻微阴影 (`shadow-lg`) 和边框，与深色背景形成强烈对比。
    -   支持缩放查看（CSS `transform: scale()`）。
    -   超出A4纸部分需要分页，前端需实现分页计算逻辑（检测高度并在 DOM 中插入分页符）。

2.  **视觉层级设计**
    -   标题使用蓝色下划线或加粗强调（Tailwind 工具类）。
    -   关键信息（如时间、地点）右对齐 (`flex justify-between`)。
    -   使用项目符号、缩进、分段等方式提升可读性（Tiptap 渲染 HTML）。

---

### 四、顶部全局操作栏

**定位**：横跨三栏的系统级功能入口，提供文档级别的操作和视图控制。

**功能详解**：

1.  **左侧文档信息区**
    -   文档标题输入框（显示"资深Java软件开发..."，HeroUI `Input` variant="underlined"）。
    -   保存状态指示器（"已保存 刚刚"），基于 Zustand 状态显示。

2.  **中间工具栏区**
    -   **智能排版按钮**：智能一页功能，自动调节字号行高和页边距（调整 Tailwind 样式变量或 CSS 变量）。
    -   **字体选择下拉框**：HeroUI `Select`，当前显示"微软雅黑"。
    -   **字号调节器**：HeroUI `ButtonGroup` 或 `Slider`，支持 12-16px 调节。
    -   **排版样式控制**：行高/段落间距调节（HeroUI `Popover` 内置 `Slider`）。
    -   **主题/模板切换**：自带3种模板（简约、标准、创意），通过切换 CSS 变量或 Tailwind 类名实现。
    -   **页面设置**：控制页边距、纸张方向。
    -   **模块管理**：
        -   **已有模块区域**：列表展示当前简历中已启用的模块，支持拖拽排序（`dnd-kit`）。
        -   **添加模块区域**：展示可选模块库，HeroUI `Card` 形式，点击添加。
        -   **模块区域**：专业技能、工作经历、项目经历、教育经历、个人总结、社团和组织经历、其他、研究经历、荣誉奖项、自定义
3.  **右侧核心操作区**
    -   **翻译按钮**：支持简历内容多语言转换（结合 `vite-plugin-auto-i18n` 或 AI 翻译接口）。
    -   **下载按钮**：HeroUI `Dropdown`，包含下载PDF、下载PNG、发送到邮箱。
        -   **下载PDF**：建议使用 `react-to-print` 或 `html2canvas` + `jspdf` 实现，需确保图片清晰度和文本可选中（如果是图片生成则不可选中，建议优先考虑 PDF 生成库）。

---

### 五、交互逻辑与体验细节

1.  **实时同步机制**：左侧编辑内容即时反映在中间预览区，延迟控制在300ms内（使用 lodash `debounce`）。用户停止编辑1000毫秒后触发保存（Zustand 中间件监听）。先保存到本地 `localStorage` (Zustand persist) 确保不丢失，网络通畅时通过 Axios 同步到后端 API。
2.  **状态反馈系统**：使用 HeroUI `Toast` 或 `Sonner` 显示保存状态、AI诊断结果。
3.  **防误触设计**：删除操作配有图标，点击触发 HeroUI `Modal` 或 `Popover` 二次确认。
4.  **视觉引导**：通过 HeroUI 主题色（Primary Color）建立清晰的信息层级。
5.  **响应式考虑**：
    -   桌面端：完整三栏布局。
    -   平板端：左侧面板变为抽屉式（HeroUI `Drawer` 或 `Sheet`）可收起。
    -   手机端：仅保留编辑画布和浮动工具栏。
6.  **头像上传**：流程为用户选择图片后，使用 `react-avatar-editor` 或类似库进行裁剪，头像组件在编辑画布中显示。
7.  **PDF生成与下载系统**：分页算法检测内容高度（`useResizeObserver`），当模块累计高度接近A4高度时自动插入分页符 (`break-before-page`)。
8.  **性能优化**：
    -   路由懒加载 (`React.lazy`)。
    -   组件级懒加载。
    -   虚拟列表 (`react-window`) 处理大量模块（虽然简历模块通常不多）。
    -   防抖保存。
