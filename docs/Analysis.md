# 知识库小破站 · 优先级结构化问题清单

> 说明：以下问题清单基于《知识库小破站》需求文档整理，按「优先级→模块→子主题」分组，优先级从高到低依次为 P0（必须尽快澄清）、P1（重要但不阻塞起步）、P2（中等优先级）、P3（可在后期迭代确认）。所有问题均服务于后续任务拆解与实现。

## P0 · 核心基础与整体规划

- 模块：整体架构与项目规划  
  - Q0-1：项目一期的交付范围是什么？  
    - 是要一次性完成文档中所有模块（前台 + 编辑器 + 全局播放器 + Auth + 后台管理 + BOT），还是拆为多个版本（例如 V1 只做「前台展示 + 基础登录 + 简单后台」）？  
    - 答：拆分多个版本，每个版本专注于不同功能模块，避免一次性完成所有功能。
  - Q0-2：后端技术栈与接口提供形式？  
    - 是否已存在后端服务？接口是否会按照文档中的数据结构和交互节奏进行设计，还是前端需要先定义 API 草案？  
    - 答：前端先定义 API 草案，与后端协商后再实现后端服务。
  - Q0-3：部署环境与运行目标？  
    - 是否只面向 PC 浏览器，还是需要在平板 / 手机浏览器上有良好体验？是否有最低浏览器版本要求？  
    - 答：面向 PC 浏览器 / 手机端口
  - Q0-4：性能与首屏加载目标？  
    - 是否有约定的首屏加载时间、资源体积（例如首屏 JS 不超过多少 MB）或 Lighthouse 评分目标？  
    - 答：首屏加载时间不超过 3 秒，资源体积不超过 1 MB。

- 模块：技术栈与依赖版本  
  - Q0-5：React 19 与各类第三方库（HeroUI、react-router-dom v7、@ant-design/plots、three.js、draft-js 等）是否已经验证兼容？  
    - 如发生不兼容，是否允许根据实际情况下调 React 或相关库版本？  
    - 答：不能调整 React 版本，只能调整第三方库版本。
  - Q0-6：数据可视化库选型固定为 `@ant-design/plots` 吗？  
    - 后台「数字大屏」、监控面板、统计图表等高度依赖图表能力，是否存在对图表样式 / 导出能力的额外要求？  
    - 答：不存在额外要求，直接使用 `@ant-design/plots` 即可。
  - Q0-7：国际化使用 `vite-plugin-auto-i18n` 的具体策略？  
    - 文案是以「中文为主，自动生成英文」还是提供中英文双语源文案？
      - 答：中文为主，自动生成英文。暂时不提供API供应商，后续根据实际情况评估是否需要提供。
    - 国际化 key 的命名规范是否需要预先约定？
      - 答：不需要，根据实际情况命名即可。

- 模块：全局主题与样式体系  
  - Q0-8：全局主题（浅色 / 深色 / 系统）与主题色是否只存前端 `localStorage`，还是需要与用户信息绑定（后端存储）？  
    - 答：只存储在前端 `localStorage`，不需要与用户信息绑定。
  - Q0-9：`styles/light.css` 与 `styles/dark.css` 的实现方式？  
    - 是否统一采用 CSS 变量（例如 `:root { --primary: ... }`）+ Tailwind 自定义配置的混合方案？  
      - 答：是，统一采用 CSS 变量 + Tailwind 自定义配置。
  - Q0-10：全局「减少动画模式」的开关来源？  
    - 是否跟随操作系统的「减少动态效果」设置，还是在系统设置中单独提供开关？  
    - 答：在系统设置中单独提供开关，用户可以根据需要开启或关闭。

## P1 · 前台展示系统（Front）

- 模块：导航与路由信息架构  
  - Q1-1：前台路由结构是否已经确定？  
    - 例如：`/`（首页）、`/allSearch`、`/resume`, `/tools`, `/about`, `/login`, `/register`, `/profile` 等具体路径约定？  
    - 答：根据实际情况命名，保持路径简洁、语义化。
  - Q1-2：前台与后台之间的路由跳转规则？  
    - 从前台点击「后台管理」后，如果未登录或权限不足，是否统一跳转到登录页并记录来源地址，用于登录成功后返回？ 
    - 答：是，统一跳转到登录页并记录来源地址。
  - Q1-3：未登录用户访问「个人中心 / 后台管理」等页面时的处理？  
    - 是否统一使用路由守卫拦截并跳转到登录页？拦截提示文案是否有统一规范？  
    - 答：是，统一使用路由守卫拦截并跳转到登录页。拦截提示文案为：「您需要先登录才能访问该页面」。

- 模块：首页（Home）  
  - Q1-4：首页 Banner 区域 Three.js 场景的复杂度要求？  
    - 是否有参考效果或需要控制的渲染开销（例如是否允许粒子数量较多的特效）？  
    - 答：有参考效果，渲染开销控制在 100 毫秒内。可以做成烟花或者雪花飘落形式，鼠标放上去有交互特效。
  - Q1-5：首页「视频推荐」与「文章推荐」「网友评价」数据来源？  
    - 是否有已有接口（推荐算法由后端负责），还是前端需先使用 mock 数据并预留 API 对接？  
    - 答：有已有接口，前端需预留 API 对接。
  - Q1-6：滚动胶卷式「小破站功能介绍区域」的交互优先级？  
    - 若实现难度过高，是否允许分阶段实现（先实现基础水平滑动，再增强阻尼与胶卷前后层次感）？  
    - 答：允许分阶段实现。先实现基础水平滑动，再增强阻尼与胶卷前后层次感。可以参考https://www.doubao.com/about中的absolute-center元素

- 模块：知识库页面（AllSearch）  
  - Q1-7：综合搜索结果排序规则由谁决定？  
    - 是否由后端直接返回排序好的结果，前端只负责展示；还是前端需根据多个字段（热度、时间、点赞等）自行排序？  
    - 答：由后端直接返回排序好的结果，前端只负责展示。
  - Q1-8：多维筛选与高级搜索的参数协议？  
    - 是否有明确的参数命名规范和分页规则（例如 `page`, `pageSize`, `sortField`, `sortOrder`）？  
    - 答：有明确的参数命名规范和分页规则。
  - Q1-9：多类型结果（视频 / 文档 / 百宝箱 / 用户）是单一接口多类型返回，还是各自独立接口？  
    - 答：单一接口多类型返回。

- 模块：视频详情页 / 文档详情页  
  - Q1-10：Markdown、PDF、Office 在线预览的后端支持情况？  
    - 是否已有转换服务（例如将 Office 转为 PDF）？若无，前端是否仅需支持 Markdown + 简版富文本，其他格式暂时以下载或简单预览替代？  
    - 答：已有转换服务，前端仅需支持 Markdown + 简版富文本。其他格式暂时以下载或简单预览替代。
  - Q1-11：评论区的「无限层级楼中楼」是否有最大层级限制？  
    - 如果层级太深，是否需要折叠显示或限制回复深度？  
    - 答：如果层级太深，建议折叠显示。回复深度限制为 3 层。
  - Q1-12：评论区的反垃圾 / 审核策略？  
    - 前端是否需要在发布前做敏感词提示，还是由后台审核模块统一处理？  
    - 答：前端需要在发布前做敏感词提示，防止用户发布违规内容。后台审核模块统一处理，包括但不限于关键词过滤、人工审核等。

- 模块：简历在线制作 / 百宝袋 / 关于博主 / 个人中心  
  - Q1-13：简历在线制作页面当前仅路由到「尚未开发」页面，是否需要在一期就实现真正的简历编辑功能？如果需要：  
    - 简历模板数量与样式要求？
    - 答：支持 3 种简历模板，样式可自定义。
    - 是否支持导出 PDF？  
    - 答：支持导出 PDF。
  - Q1-14：百宝袋页面的「网站数据」来源？  
    - 网站条目是手工在后台配置，还是从第三方接口聚合？
    - 答：手工在后台配置。
  - Q1-15：关于博主页面「技术栈 Logo Loop」展示的技术栈列表由谁维护？  
    - 是否从后端接口获取，还是前端写死配置？  
    - 答：前端写死配置，后续可考虑从后端接口获取。
  - Q1-16：个人中心数据范围与隐私控制？  
    - 用户是否可以自定义哪些数据对外可见？若是，需要与权限 / 隐私设置联动的详细规则。  
    - 答：用户可以自定义哪些数据对外可见。例如，用户可以选择是否公开自己的邮箱、手机号等个人信息。
    - 权限 / 隐私设置联动的详细规则：用户在个人中心可以查看和修改自己的隐私设置，例如是否公开邮箱、手机号等个人信息。

## P1 · 编辑器系统与全局工具

- 模块：编辑器系统（富文本 + Markdown）  
  - Q1-17：富文本编辑器基于 draft-js 还是考虑其他方案（如 tiptap / slate）？  
    - 若坚持 draft-js，是否接受其生态相对老旧的现实；是否需要国际化支持及自定义快捷键？  
    - 答：可以使用新的富文本编辑器库，例如 tiptap / slate，如果使用了要更新文档中的相关的版本号。
  - Q1-18：实时协同编辑的实现方案？  
    - 是否一期开启协同编辑功能，还是预留扩展点（前端结构上支持，但暂不接入 WebSocket / 协作服务）？  
    - 答：不预留协同编辑功能。
  - Q1-19：版本历史与草稿的存储策略？  
    - 历史版本数量上限、保留时长、是否可由用户手动清理？  
    - 答：历史版本数量上限为 10 个，保留时长为 7 天。用户可以在个人中心手动清理历史版本。
  - Q1-20：大文本「轻量模式」的触发阈值是否可以配置？  
    - 默认文档中写的是「超 10000 字或 10 张图片」，后续是否需要在系统设置中提供开关或阈值调整？  
    - 答：后续可以在系统设置中提供开关或阈值调整。

- 模块：全局视频播放器  
  - Q1-21：弹幕功能的后端协议与存储策略？  
    - 弹幕是按视频 ID + 时间线存储，还是仅简单走评论系统？ 
    - 答：按视频 ID + 时间线存储。
  - Q1-22：画质切换（标清 / 高清 / 超清）的视频源由后端提供几路？  
    - 是否需要前端负责根据网络情况自动选择画质？
    - 答：需要。根据网络情况自动选择画质，优先选择高清或超清。
  - Q1-23：播放记忆功能的范围？  
    - 仅针对单设备 / 单浏览器，还是登录用户在多设备之间同步？ 
    - 答：仅针对单设备 / 单浏览器。

- 模块：API 封装与拦截处理  
  - Q1-24：全局响应格式 `{ code, msg, data }` 是否所有后端接口都能统一遵守？  
    - 若存在部分第三方接口返回格式不同，是否需要在 API 层增加适配器？  
    - 答：需要。在 API 层增加适配器，将不同格式的响应转换为统一的 `{ code, msg, data }` 格式。
  - Q1-25：错误处理策略的统一规范？  
    - 哪些错误使用全局提示（如 Toast），哪些在局部展示（如表单错误文案）；401 重定向登录时是否需要保留当前路由用于登录完成后返回？  
    - 答：全局提示错误（如 Toast），局部展示错误（如表单错误文案）。401 重定向登录时需要保留当前路由用于登录完成后返回。
  - Q1-26：请求头中的「设备标识 / 接口版本号 / 用户名字」等字段是否已有统一命名和生成规则？  
    - 答：已统一命名和生成规则。例如，设备标识为 `device-id`，接口版本号为 `api-version`，用户名字为 `username`。

- 模块：防抖与通用工具  
  - Q1-27：防抖与节流的使用边界？  
    - 当前文档只定义防抖，是否需要统一的节流工具函数？  
    - 答：需要。统一的节流工具函数可以在 `utils` 目录下定义，例如 `throttle.js`。
  - Q1-28：全局工具（时间、格式化、Cookie 等）的命名规范与单测范围？  
    - 是否要求对 `utils` 下的关键函数编写单元测试？测试框架是否偏好 Vitest / Jest？
    - 答：不需要  

## P1 · 认证与安全模块（Auth）

- 模块：登录 / 注册 / 找回密码  
  - Q1-29：登录方式与后端认证方案？  
    - 是否使用 JWT（文档中有提及）+ 刷新 Token，还是仅短期 Access Token？刷新 Token 的获取与更新策略如何设计？  
    - 答：使用 JWT（文档中有提及）+ 刷新 Token。由后端进行刷新 Token 的获取与更新。
  - Q1-30：第三方登录（GitHub / QQ / 微信）在一期开启吗？  
    - 是否已经拥有对应应用的 AppId / 回调域名等配置？  
    - 答：已拥有对应应用的 AppId / 回调域名等配置。
  - Q1-31：验证码发送渠道与频率限制？  
    - 文档中多处提到「短信验证码」，实际环境中是否采用短信 / 邮件 / 站内验证码？  
    - 答：只支持邮件验证码。
    - 单账号 / 单 IP 的发送频率限制和风控策略是否有统一规范？  
    - 答：单账号 / 单 IP 发送验证码的频率限制为 1 分钟 1 次。
  - Q1-32：密码安全策略？  
    - 密码强度规则（至少几位、是否必须包含大小写 + 数字 + 符号），是否需要在前端给出强度条提示？  
    - 答：需要。在前端给出强度条提示，例如使用 `zxcvbn` 库计算密码强度。
  - Q1-33：登录失败 5 次后「强制验证码」的具体重置规则？  
    - 答：按账号统计。5 次失败后，需要输入验证码才能登录。验证码有效期为 5 分钟。

- 模块：权限与路由守卫  
  - Q1-34：权限模型采用何种粒度？  
    - 仅基于角色（Role），还是角色 + 细粒度权限点（例如 `content:list`, `content:edit`）？  
    - 答：角色 + 细粒度权限点
  - Q1-35：前端如何获取权限列表？  
    - 登录成功后一次性返回全部权限，还是按模块懒加载？  
    - 答：按模块懒加载
  - Q1-36：无权限访问某页面时的处理策略？  
    - 跳转 403 页面、404 页面，还是直接隐藏入口并禁止手动输入路由访问？  
    - 答：直接隐藏入口并禁止手动输入路由访问

## P1 · 后台管理系统（Admin）

- 模块：菜单与路由绑定  
  - Q1-37：左侧树形菜单与前端路由的对应关系？  
    - 是否由后端返回菜单树（含路由 path、permission key），前端动态生成路由；还是由前端定义静态 routes，然后菜单仅做显示配置？  
    - 答：后端返回，前端先生成
  - Q1-38：多标签页（Tab）与路由的状态同步规则？  
    - 标签关闭 / 刷新 / 关闭其他 / 关闭全部时，对组件状态、缓存（例如 keep-alive）有无特殊要求？  
    - 答：无特殊要求。
- 模块：仪表盘与监控  
  - Q1-39：仪表盘核心指标与图表数据来源？  
    - 是否使用真实后端监控数据，还是先使用 mock 数据？  
    - 答：先使用自定义数据，后面再由后端提供
  - Q1-40：系统监控 / 缓存监控 / 日志 / 用户行为等模块的数据接口是否已经规划？  
    - 是否有统一的接口前缀（例如 `/api/monitor/...`），便于前端封装模块化 API？  
    - 答：有。例如，系统监控接口为 `/api/monitor/system`，缓存监控接口为 `/api/monitor/cache`。

- 模块：内容与审核后台（视频管理 / 文档管理 / 审核配置）  
  - Q1-41：视频 / 文档上传的「分片上传 + 断点续传」后端实现是否已经确定？  
    - 是否采用常见的秒传 + 分片合并方案（MD5 校验 / 文件签名）？前端是否需要展示上传任务的状态列表页面？  
    - 答：采用秒传 + 分片合并方案。前端需要展示上传任务的状态列表页面。
  - Q1-42：审核流程中的「AI 预审核」部分是否已有服务？  
    - 如果没有，前端是否先只实现人工审核流程，并为 AI 标记预留字段？  
    - 答：有。前端需要预留字段，例如 `is_ai_checked`。
  - Q1-43：违规评论库与敏感词库的同步机制？  
    - 敏感词的新增 / 删除是否会即时生效，前端是否需要刷新缓存？
    - 答：是。前端需要刷新缓存。  

## P2 · 体验细节与动态组件

- 模块：React Bits / Magic UI 动效  
  - Q2-1：React Bits / Magic UI 组件通过什么方式集成？  
    - 是通过脚本自动拉取并复制到 `src/components/Motion`，还是手动复制官方示例并重构为项目风格？  
    - 答：手动复制官方示例并重构为项目风格，要求符合页面整体风格
  - Q2-2：全局「图标点击旋转一次」的实现范围？  
    - 是否真正对所有 Icon 组件应用（包括 HeroUI 内置图标 / react-icons / 自定义 SVG），还是仅对导航按钮与常用交互图标？ 
    - 答：对所有 Icon 组件应用。

- 模块：全局字体与资源  
  - Q2-3：方舟像素字体的加载策略？  
    - 是否采用可变字体 / 多权重？未加载完成前是否使用系统字体回退？  
    - 答：采用可变字体 / 多权重。未加载完成前使用系统字体回退。
  - Q2-4：public 目录下的图片 / 字体资源是否会继续扩充？  
    - 是否需要统一的资源命名与分层规范（比如 `public/logo`, `public/loading`, `public/Thumbnail`）的约束文档？ 
    - 答：是。例如，所有图片资源都放在 `public/images` 目录下，所有字体资源都放在 `public/fonts` 目录下。

- 模块：响应式与无障碍  
  - Q2-5：移动端适配的最低分辨率？  
    - 是否需要专门对横屏设备做优化？  
    - 答：不需要
  - Q2-6：是否有无障碍（a11y）相关要求？  
    - 如键盘可达性、ARIA 标签、对色弱模式 / 高对比度模式的支持程度？  
    - 答：需要支持键盘可达性、ARIA 标签。对色弱模式 / 高对比度模式的支持程度根据实际情况调整。

## P3 · 运维、日志与扩展模块

- 模块：BOT 控制台（QQBot / WeChatBot / DingTalkBot）  
  - Q3-1：BOT 控制台在当前版本中的优先级？  
    - 是仅保留路由占位与「尚未开发」页面，还是需要实现最小可用功能（如简单配置列表）？  
    - 答：暂时保留路由占位与「尚未开发」页面。
  - Q3-2：各机器人与第三方平台的接入方式？  
    - 是否已有后端服务负责对接，前端仅作为配置管理界面？  
    - 答：是。后端负责对接，前端仅作为配置管理界面。
- 模块：系统通知与消息中心  
  - Q3-3：系统通知（站内信 / 邮件 / 推送）模块的整体规划？  
    - 文档在多处提到通知（登录异常、审核结果、状态变更等），是否有统一的消息中心接口与前端展示入口？  
    - 答：有。例如，系统通知接口为 `/api/notify/system`，消息中心接口为 `/api/notify/center`。
---

以上问题清单建议作为后续需求澄清与任务拆解的基础输入。后续可在每个大模块下进一步建立「需求确认 → 设计确认 → 开发任务 → 测试用例 → API TODO 文档」的闭环流程。

